{% load static %}
<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daftar Produk - Fasprint Cetak</title>

    <!-- External CSS -->
    <link rel="stylesheet" href="{% static 'cetakapp/css/style.css' %}">
    <link rel="stylesheet" href="{% static 'cetakapp/css/modal.css' %}">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <h1>Daftar Produk</h1>

    <div class="filter-group">
        <a href="?status=all" class="filter-btn btn-all {% if current_status == 'all' %}active{% endif %}">Semua
            Data</a>
        <a href="?status=bisa" class="filter-btn btn-bisa {% if current_status == 'bisa' %}active{% endif %}">Bisa
            Dijual</a>
        <a href="?status=tidak" class="filter-btn btn-tidak {% if current_status == 'tidak' %}active{% endif %}">Tidak
            Bisa Dijual</a>
    </div>

    <div class="container">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nama Produk</th>
                    <th class="category-col">Kategori</th>
                    <th class="price">Harga</th>
                    <th style="text-align: center;">Status</th>
                    <th style="text-align: center;">Aksi</th>
                </tr>
            </thead>
            <tbody>
                {% for product in products %}
                <tr>
                    <td>{{ product.id_produk }}</td>
                    <td>{{ product.nama_produk }}</td>
                    <td class="category-col">{{ product.kategori.nama_kategori }}</td>
                    <td class="price">Rp {{ product.harga|floatformat:0 }}</td>
                    <td style="text-align: center;">
                        <span
                            class="status-badge {% if product.status.nama_status == 'bisa dijual' %}status-bisa{% else %}status-tidak{% endif %}">
                            {{ product.status.nama_status }}
                        </span>
                    </td>
                    <td>
                        <div class="action-group">
                            <a href="#" class="action-btn btn-edit" title="Edit">
                                <i class="fa-solid fa-pen-to-square"></i>
                            </a>
                            <a href="javascript:void(0)" class="action-btn btn-delete" title="Hapus"
                                onclick="showDeleteModal('{{ product.nama_produk }}', '{{ product.id_produk }}')">
                                <i class="fa-solid fa-trash"></i>
                            </a>
                        </div>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" style="text-align: center;">Tidak ada data produk.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Floating Action Button -->
    <a href="{% url 'add_product' %}" class="fab-btn" title="Tambah Produk">
        <i class="fa-solid fa-plus"></i>
    </a>

    <!-- Include Delete Modal -->
    {% include 'cetakapp/_delete_modal.html' %}

    <!-- External JS -->
    <script src="{% static 'cetakapp/js/modal.js' %}"></script>
</body>

</html>